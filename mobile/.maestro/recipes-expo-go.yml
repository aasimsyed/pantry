# Recipes Screen Test - For Expo Go
# Use this when testing with Expo Go app
# App ID for Expo Go is host.exp.Exponent

appId: host.exp.Exponent
---
- launchApp
# Wait a bit for Expo Go to load
- waitForAnimationToEnd:
    timeout: 3000
# Expo Go opens to project selector - tap our app to open it
- runFlow:
    when:
      visible: "Smart Pantry AI"
    commands:
      - tapOn: "Smart Pantry AI"
      - waitForAnimationToEnd:
          timeout: 5000
# Wait for app to load - check if we're on login or home screen
- extendedWaitUntil:
    visible: "Sign In"
    timeout: 10000
    # If login screen doesn't appear, check for home screen
- runFlow:
    when:
      visible: "Smart Pantry"
    commands:
      # Already logged in, skip to home screen
      - assertVisible:
          id: "home-title"
      - stopFlow
# When on login screen, log in first (admin test user)
- runFlow:
    when:
      visible: "Sign In"
    commands:
      - tapOn:
          id: "email-input"
      - waitForAnimationToEnd:
          timeout: 2000
      - setClipboard: "admin@pantry.com"
      - pasteText
      - tapOn:
          id: "password-input"
      - waitForAnimationToEnd:
          timeout: 2000
      - setClipboard: "Admin12345"
      - pasteText
      - waitForAnimationToEnd:
          timeout: 1000
      - hideKeyboard
      - tapOn:
          id: "login-button"
      - extendedWaitUntil:
          visible: "Smart Pantry"
          timeout: 15000
# Dismiss iCloud "Save Password?" dialog if it appears
- runFlow:
    when:
      visible: "Not Now"
    commands:
      - tapOn: "Not Now"
# Navigate to Recipes screen
- assertVisible:
    id: "home-title"
- tapOn:
    id: "quick-action-recipes"
- assertVisible:
    id: "recipes-title"
# Verify Recipes screen elements
- assertVisible:
    id: "recipes-title"
- assertVisible:
    id: "num-recipes-input"
- assertVisible:
    id: "allow-missing-checkbox"
- assertVisible:
    id: "cuisine-selector"
- assertVisible:
    id: "difficulty-selector"
- assertVisible:
    id: "generate-recipes-button"
# Test recipe options
- tapOn:
    id: "num-recipes-input"
- inputText: "2"
- hideKeyboard
# Note: Recipe generation requires pantry with items and API connection
# This test verifies UI elements are present and functional
