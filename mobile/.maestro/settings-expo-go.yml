# Settings Screen Test - For Expo Go
# Use this when testing with Expo Go app

appId: host.exp.Exponent
---
- launchApp
# Expo Go opens to project selector - tap our app to open it
- runFlow:
    when:
      visible: "Smart Pantry AI"
    commands:
      - tapOn: "Smart Pantry AI"
      - waitForAnimationToEnd:
          timeout: 5000
# When on login screen, log in first (admin test user)
- runFlow:
    when:
      visible: "Sign In"
    commands:
      - tapOn:
          id: "email-input"
      - waitForAnimationToEnd:
          timeout: 2000
      - setClipboard: "admin@pantry.com"
      - pasteText
      - tapOn:
          id: "password-input"
      - waitForAnimationToEnd:
          timeout: 2000
      - setClipboard: "Admin12345"
      - pasteText
      - waitForAnimationToEnd:
          timeout: 1000
      - hideKeyboard
      - tapOn:
          id: "login-button"
      - extendedWaitUntil:
          visible: "Smart Pantry"
          timeout: 15000
# Dismiss iCloud "Save Password?" dialog if it appears
- runFlow:
    when:
      visible: "Not Now"
    commands:
      - tapOn: "Not Now"
# Navigate to Settings
- assertVisible:
    id: "home-title"
- tapOn:
    id: "quick-action-settings"
- assertVisible:
    id: "settings-title"
# Verify Settings screen elements
- assertVisible:
    id: "settings-title"
- assertVisible: "Appearance"
- assertVisible:
    id: "theme-light"
- assertVisible:
    id: "theme-system"
- assertVisible:
    id: "theme-dark"
# Test theme selection
- tapOn:
    id: "theme-light"
- tapOn:
    id: "theme-system"
- tapOn:
    id: "theme-dark"
# Verify AI Model Preferences section
- assertVisible: "AI Model Preferences"
- assertVisible:
    id: "ai-provider-default"
- assertVisible:
    id: "ai-provider-openai"
- assertVisible:
    id: "ai-provider-anthropic"
# Test AI provider selection
- tapOn:
    id: "ai-provider-openai"
# Verify AI model options appear (if provider selected)
- runFlow:
    when:
      id: "ai-model-default"
    commands:
      - assertVisible:
          id: "ai-model-default"
      # Note: Specific model testIDs depend on available models
# Test save settings
- assertVisible:
    id: "save-settings-button"
# Note: Actually saving would require API connection
# Navigate back
- tapOn: "Main"
